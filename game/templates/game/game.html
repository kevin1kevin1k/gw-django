{% extends 'game/base.html' %}

{% block title %}玩遊戲 | {{ block.super }}{% endblock title %}

{% block content %}
  {% if user.is_authenticated %}
  {% csrf_token %}
    <p>{{ answer }}</p>
    <hr>
  {% endif %}

  <div class="row">
    <div class="col-lg-6">
    {% if success %}
     <fieldset disabled id="fset">
    {% else %}
     <fieldset id="fset">
    {% endif %}
      <form action="{% url 'get_result' %}" method="post">
        {% csrf_token %}
        <input type="hidden" id="answer" name="answer" value="{{ answer }}">
        <input type="hidden" id="prev" name="prev" value="{{ prev }}">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="問個問題..." id="question" name="question" required="true" autofocus="true">
          <span class="input-group-btn">
            <input type="submit" value="送出 (Enter)" class="btn btn-success">
          </span>
        </div>
      </form>
     </fieldset>
      
      {% if success %}
        <br>
        <div class="alert alert-success" role="alert">
          <p>恭喜答對！</p>
        </div>
      {% endif %}
      
      <br>
      <div class="col-lg-4">
        <button type="button" class="btn btn-default" onclick="show()">公布答案</button>
        <script>
          function show() {
            document.getElementById("show_answer").style.display = "block";
            document.getElementById("fset").disabled = "true";
          }
        </script>
      </div>
      <div class="col-lg-5">
        <div class="alert alert-info" id="show_answer" role="alert" style="display: none;">
          正確答案：{{ answer }}
        </div>
      </div>
      
    </div>
    
    <div class="col-lg-6">
      <table class="table table-hover">
        <thead>
          <tr>
            <th class="col-lg-1">#</th>
            <th class="col-lg-4">問題</th>
            <th class="col-lg-1">結果</th>
          </tr>
        </thead>
        <tbody>
          {% for i in prev_list %}
            <tr>
              <td class="col-lg-1">{{ i.2 }}</td>
              <td class="col-lg-4">{{ i.0 }}</td>
              <td class="col-lg-1">{{ i.1 }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>        
  </div>
  
  <div class="row">
    <br>
    <div style="width: 100%; overflow: auto;">
      <table class="table">
        <tbody>
          {% for grp in answers %}
            <tr>
              {% for ans in grp %}
                <td>{{ ans.name }}</td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <br>
  </div>

{% endblock content %}
